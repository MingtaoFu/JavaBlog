{"version":3,"sources":["plugin.js"],"names":[],"mappings":"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","file":"plugin-compiled.js","sourcesContent":["/**\n * @license Copyright (c) 2003-2015, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or http://ckeditor.com/license\n */\n\n'use strict';\n\n( function() {\n\tCKEDITOR.plugins.add( 'uploadimage', {\n\t\trequires: 'uploadwidget',\n\n\t\tonLoad: function() {\n\t\t\tCKEDITOR.addCss(\n\t\t\t\t'.cke_upload_uploading img{' +\n\t\t\t\t\t'opacity: 0.3' +\n\t\t\t\t'}'\n\t\t\t);\n\t\t},\n\n\t\tinit: function( editor ) {\n\t\t\t// Do not execute this paste listener if it will not be possible to upload file.\n\t\t\tif ( !CKEDITOR.plugins.clipboard.isFileApiSupported ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar fileTools = CKEDITOR.fileTools,\n\t\t\t\tuploadUrl = fileTools.getUploadUrl( editor.config, 'image' );\n\n\t\t\tif ( !uploadUrl ) {\n\t\t\t\tCKEDITOR.error( 'uploadimage-config' );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Handle images which are available in the dataTransfer.\n\t\t\tfileTools.addUploadWidget( editor, 'uploadimage', {\n\t\t\t\tsupportedTypes: /image\\/(jpeg|png|gif|bmp)/,\n\n\t\t\t\tuploadUrl: uploadUrl,\n\n\t\t\t\tfileToElement: function() {\n\t\t\t\t\tvar img = new CKEDITOR.dom.element( 'img' );\n\t\t\t\t\timg.setAttribute( 'src', loadingImage );\n\t\t\t\t\treturn img;\n\t\t\t\t},\n\n\t\t\t\tparts: {\n\t\t\t\t\timg: 'img'\n\t\t\t\t},\n\n\t\t\t\tonUploading: function( upload ) {\n\t\t\t\t\t// Show the image during the upload.\n\t\t\t\t\tthis.parts.img.setAttribute( 'src', upload.data );\n\t\t\t\t},\n\n\t\t\t\tonUploaded: function( upload ) {\n\t\t\t\t\t// Set width and height to prevent blinking.\n\t\t\t\t\tthis.replaceWith( '<img src=\"' + upload.url + '\" ' +\n\t\t\t\t\t\t'width=\"' + this.parts.img.$.naturalWidth + '\" ' +\n\t\t\t\t\t\t'height=\"' + this.parts.img.$.naturalHeight + '\">' );\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\t// Handle images which are not available in the dataTransfer.\n\t\t\t// This means that we need to read them from the <img src=\"data:...\"> elements.\n\t\t\teditor.on( 'paste', function( evt ) {\n\t\t\t\t// For performance reason do not parse data if it does not contain img tag and data attribute.\n\t\t\t\tif ( !evt.data.dataValue.match( /<img[\\s\\S]+data:/i ) ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar data = evt.data,\n\t\t\t\t\t// Prevent XSS attacks.\n\t\t\t\t\ttempDoc = document.implementation.createHTMLDocument( '' ),\n\t\t\t\t\ttemp = new CKEDITOR.dom.element( tempDoc.body ),\n\t\t\t\t\timgs, img, i;\n\n\t\t\t\t// Without this isReadOnly will not works properly.\n\t\t\t\ttemp.data( 'cke-editable', 1 );\n\n\t\t\t\ttemp.appendHtml( data.dataValue );\n\n\t\t\t\timgs = temp.find( 'img' );\n\n\t\t\t\tfor ( i = 0; i < imgs.count(); i++ ) {\n\t\t\t\t\timg = imgs.getItem( i );\n\n\t\t\t\t\t// Image have to contain src=data:...\n\t\t\t\t\tvar isDataInSrc = img.getAttribute( 'src' ) && img.getAttribute( 'src' ).substring( 0, 5 ) == 'data:',\n\t\t\t\t\t\tisRealObject = img.data( 'cke-realelement' ) === null;\n\n\t\t\t\t\t// We are not uploading images in non-editable blocs and fake objects (#13003).\n\t\t\t\t\tif ( isDataInSrc && isRealObject && !img.data( 'cke-upload-id' ) && !img.isReadOnly( 1 ) ) {\n\t\t\t\t\t\tvar loader = editor.uploadRepository.create( img.getAttribute( 'src' ) );\n\t\t\t\t\t\tloader.upload( uploadUrl );\n\n\t\t\t\t\t\tfileTools.markElement( img, 'uploadimage', loader.id );\n\n\t\t\t\t\t\tfileTools.bindNotifications( editor, loader );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tdata.dataValue = temp.getHtml();\n\t\t\t} );\n\t\t}\n\t} );\n\n\t// jscs:disable maximumLineLength\n\t// Black rectangle which is shown before image is loaded.\n\tvar loadingImage = 'data:image/gif;base64,R0lGODlhDgAOAIAAAAAAAP///yH5BAAAAAAALAAAAAAOAA4AAAIMhI+py+0Po5y02qsKADs=';\n\t// jscs:enable maximumLineLength\n\n\t/**\n\t * The URL where images should be uploaded.\n\t *\n\t * @since 4.5\n\t * @cfg {String} [imageUploadUrl='' (empty string = disabled)]\n\t * @member CKEDITOR.config\n\t */\n} )();\n"]}