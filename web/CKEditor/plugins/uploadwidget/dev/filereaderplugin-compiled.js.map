{"version":3,"sources":["filereaderplugin.js"],"names":[],"mappings":";;;;AAIA,YAAY,CAAC;;AAEb,CAAE,YAAW;AACZ,SAAQ,CAAC,OAAO,CAAC,GAAG,CAAE,YAAY,EAAE;AACnC,UAAQ,EAAE,cAAc;AACxB,MAAI,EAAE,UAAU,MAAM,EAAG;AACxB,OAAI,SAAS,GAAG,QAAQ,CAAC,SAAS,CAAC;;AAEnC,YAAS,CAAC,eAAe,CAAE,MAAM,EAAE,YAAY,EAAE;AAChD,YAAQ,EAAE,UAAU,MAAM,EAAG;AAC5B,SAAI,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC;AACvB,SAAK,IAAI,IAAI,IAAI,CAAC,OAAO,CAAE,GAAG,CAAE,IAAI,CAAC,IAAI,IAAI,CAAC,OAAO,CAAE,GAAG,CAAE,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,EAAG;AAChF,UAAI,CAAC,WAAW,CAAE,IAAI,CAAE,MAAM,CAAC,IAAI,CAAC,KAAK,CAAE,GAAG,CAAE,CAAE,CAAC,CAAE,CAAE,CAAE,CAAC;MAC1D,MAAM;AACN,YAAM,CAAC,OAAO,CAAC,GAAG,CAAE,IAAI,CAAE,CAAC;MAC3B;KACD;IACD,CAAE,CAAC;;AAEJ,SAAM,CAAC,EAAE,CAAE,OAAO,EAAE,UAAU,GAAG,EAAG;AACnC,QAAI,IAAI,GAAG,GAAG,CAAC,IAAI;QAClB,YAAY,GAAG,IAAI,CAAC,YAAY;QAChC,UAAU,GAAG,YAAY,CAAC,aAAa,EAAE;QACzC,IAAI;QAAE,CAAC,CAAC;;AAET,QAAK,IAAI,CAAC,SAAS,IAAI,CAAC,UAAU,EAAG;AACpC,YAAO;KACP;;AAED,SAAM,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,UAAU,EAAE,CAAC,EAAE,EAAG;AAClC,SAAI,GAAG,YAAY,CAAC,OAAO,CAAE,CAAC,CAAE,CAAC;;AAEjC,SAAK,SAAS,CAAC,eAAe,CAAE,IAAI,EAAE,oBAAoB,CAAE,EAAG;AAC9D,UAAI,EAAE,GAAG,IAAI,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAE,MAAM,CAAE;UAC1C,MAAM,GAAG,MAAM,CAAC,gBAAgB,CAAC,MAAM,CAAE,IAAI,CAAE,CAAC;;AAEjD,QAAE,CAAC,OAAO,CAAE,KAAK,CAAE,CAAC;;AAEpB,YAAM,CAAC,IAAI,EAAE,CAAC;;AAEd,eAAS,CAAC,WAAW,CAAE,EAAE,EAAE,YAAY,EAAE,MAAM,CAAC,EAAE,CAAE,CAAC;;AAErD,eAAS,CAAC,iBAAiB,CAAE,MAAM,EAAE,MAAM,CAAE,CAAC;;AAE9C,UAAI,CAAC,SAAS,IAAI,EAAE,CAAC,YAAY,EAAE,CAAC;MACpC;KACD;IACD,CAAE,CAAC;GACJ;EACD,CAAE,CAAC;CACJ,CAAA,EAAI,CAAC","file":"filereaderplugin-compiled.js","sourcesContent":["/**\n * @license Copyright (c) 2003-2015, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md or http://ckeditor.com/license\n */\n'use strict';\n\n( function() {\n\tCKEDITOR.plugins.add( 'filereader', {\n\t\trequires: 'uploadwidget',\n\t\tinit: function( editor ) {\n\t\t\tvar fileTools = CKEDITOR.fileTools;\n\n\t\t\tfileTools.addUploadWidget( editor, 'filereader', {\n\t\t\t\tonLoaded: function( upload ) {\n\t\t\t\t\tvar data = upload.data;\n\t\t\t\t\tif ( data && data.indexOf( ',' ) >= 0 && data.indexOf( ',' ) < data.length - 1 ) {\n\t\t\t\t\t\tthis.replaceWith( atob( upload.data.split( ',' )[ 1 ] ) );\n\t\t\t\t\t} else {\n\t\t\t\t\t\teditor.widgets.del( this );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\n\t\t\teditor.on( 'paste', function( evt ) {\n\t\t\t\tvar data = evt.data,\n\t\t\t\t\tdataTransfer = data.dataTransfer,\n\t\t\t\t\tfilesCount = dataTransfer.getFilesCount(),\n\t\t\t\t\tfile, i;\n\n\t\t\t\tif ( data.dataValue || !filesCount ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfor ( i = 0; i < filesCount; i++ ) {\n\t\t\t\t\tfile = dataTransfer.getFile( i );\n\n\t\t\t\t\tif ( fileTools.isTypeSupported( file, /text\\/(plain|html)/ ) ) {\n\t\t\t\t\t\tvar el = new CKEDITOR.dom.element( 'span' ),\n\t\t\t\t\t\t\tloader = editor.uploadRepository.create( file );\n\n\t\t\t\t\t\tel.setText( '...' );\n\n\t\t\t\t\t\tloader.load();\n\n\t\t\t\t\t\tfileTools.markElement( el, 'filereader', loader.id );\n\n\t\t\t\t\t\tfileTools.bindNotifications( editor, loader );\n\n\t\t\t\t\t\tdata.dataValue += el.getOuterHtml();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\t} );\n} )();\n"]}